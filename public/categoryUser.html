<!DOCTYPE html>
<html lang="en">
    <script defer src=" https://use.fontawesome.com/releases/v5.0.10/js/all.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Boogaloo">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Economica:700,400italic">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        * {
          box-sizing: border-box;
        }
        
        body {
          font-family: Arial, Helvetica, sans-serif;
        }
            /* Remove extra left and right margins, due to padding */
            .row {margin: 0 -5px;}

            /* Clear floats after the columns */
            .row:after {
              content: "";
              display: table;
              clear: both;
            }
            /* Responsive columns - one column layout (vertical) on small screens */
            @media screen and (max-width: 600px) {
              .column {
                width: 100%;
                display: block;
                margin-bottom: 20px;
              }
            }
            .column {
              float: left;
              width: 25%;
            }
                    
        /* Style the counter cards */
        .card {
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
          margin: 16px;
          text-align: center;
          background-color: #f1f1f1;
        }
        </style>
    <link rel="stylesheet" type="text/css" href="/cssFiles/style.css">

</head>
<body>
<!--start of navbar-->
<nav class="navbar navbar-expand-md navbar-light">
    <button class="navbar-toggler ml-auto mb-2 bg-light" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" >
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <div class="container-fluid">
        <div class="row">
          <!--sidebar-->
          <div class="col-xl-2 col-lg-3 col-md-4 sidebar fixed-top">
              <a href="#" class="navbar-brand text-white d-block mx-auto text-center py-3 mb-4 bottom-border"> Good Reads </a>
              <div class="bottom-border">
                <a href="#" class="text-white d-block  text-center ">Fatma Ali</a>
              </div>
              <ul class="navbar-nav flex-column mt-4">
                  <li class="nav-item">
                      <a href="/categoryUser.html" class="nav-link text-white p-3 mb-2 sidebar-link">
                          <i class="fas fa-table text-light fa-lg mr-3">  
                          </i>Categories
                      </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link text-white p-3 mb-2 sidebar-link">
                            <i class="fas fa-file-alt text-light fa-lg mr-3">  
                            </i>Books
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link text-white p-3 mb-2 sidebar-link">
                            <i class="fas fa-users text-light fa-lg mr-3">  
                            </i>Authors
                        </a>
                    </li>
              </ul>
          </div>
          <!--end sidebar-->
           <!--start top nav-->
          <div class="col-xl-10 col-lg-9 col-md-8 ml-auto bg-dark fixed-top py-2 top-navbar">
            <div class="row align-item-center">
              <div class="col-md-4">
                  <h4 class="text-light  text-uppercase mb-0">Home</h4>
              </div>
                <div class="col-md-8 text-left">
                  <ul class="navbar-nav">
                      <li class="nav-item ml-md-auto ">
                          <a href="#" class="nav-link" data-toggle="modal" data-target="#sign-out">
                          <i class="fas fa-sign-out-alt text-danger fa-lg"></i>
                          </a>
                      </li>
                  </ul>
                </div>
            </div>
          </div>
          <!--end of top-nav-->
        </div>
      </div>
    </div>
  </nav>
<!--end of navbar-->
<!--start model-->
<div class="modal fade" id="sign-out">
   <div class="modal-dialog">
     <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Want to leave?</h4>
            <button type="button" class="close" data-dismiss="modal">&times;
            </button>
          </div>
          <div class="modal-body">
              Press logout to leave
          </div>
          <div class="modal-footer">
               <button type="button" class="btn btn-success" data-dismiss="modal">Stay Here</button>
               <button type="button" class="btn btn-danger" data-dismiss="modal">Logout</button>
          </div>
     </div>
   </div>
</div>
<!--end model-->
 <!-- The Modal Input Categories-->
 <div class="modal fade" id="myModalCategories">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
    
      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Modal Heading</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      
      <!-- Modal body -->
      <div class="modal-body">
        <input type="text" class="form-control" placeholder="Category" name="Categories">
      </div>
      
      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-dismiss="modal">Add</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
      </div>
      
    </div>
  </div>
</div>
<!--end of model-->
<div class="container-fluid">
    <div class="row">
        <div class=" col-xl-10 col-lg-9  col-md-8 ml-auto">
            <div class="row pt-5 mt-3 mb-5">
                <div class="col-xl-12 col-sm-12 p-2">
                 <div  id="card-container">

                 </div>
            </div>
        </div>
    </div>
</div>
</div>
<!--<a id="test" class="text-center" href="">fat</a>-->
      </div>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
          $('[data-toggle="tooltip"]').tooltip();
        const options = {
          method: 'get',
          headers: {
            'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8'
          }
        }
    let cardContainer;
  class createTaskCard {
      constructor(task) {
      this.column = document.createElement('div');
      this.column.className = 'column';
      this.imag=document.createElement('img')
      this.imag.className="card-img-top" 
      this.imag.src='http://getwallpapers.com/wallpaper/full/0/6/b/1184902-book-pages-as-wallpaper-2800x2100-for-windows-10.jpg'
      this.card = document.createElement('div');
      this.card.className = 'card   text-center';
      this.cardBody = document.createElement('div');
      this.cardBody.className = 'card-block';
      this.title = document.createElement('a');
      this.title.className="card-text"
      this.title.innerText = task.categoryName;
      this.title.className = 'card-title';
      this.title.addEventListener("click", function(){
       let url = `/category/${task._id}`
        fetch(url, options)
        .then(response => response.json())
        .then((text) => {
          console.log(text.bookObj.myBooks[0].categoryId);
          console.log(`${task._id}`);
           // this.setAttribute('href',`/category/categoryhtml/${task._id}`)
           this.href=`/category/categoryhtml/${task._id}`
            })
        .catch(function(error) {
            if (error.name === 'AbortError') {
          console.error('Fetch aborted')
        } else {
          console.error('Another error', error)
        }
      });
      })
      this.card.appendChild(this.imag)
      this.cardBody.appendChild(this.title);
      this.card.appendChild(this.cardBody);
      this.column.appendChild(this.card)
      cardContainer.appendChild(this.column);
      }
    }
const url = "/category/categoryjson"
//progressive app
    fetch(url, options)
    .then(response => response.json())
    .then(categoryNames => {
     //console.log(categoryNames.categories[1].categoryName);
    // console.log(typeof categoryNames);
     let initListOfTasks = () => {
    if (cardContainer) {
        document.getElementById('card-container').replaceWith(cardContainer);
        return;
    }
    cardContainer = document.getElementById('card-container');
      categoryNames.categories.forEach((task) => {
        new  createTaskCard(task);
        //  console.log(task);
      });
     };
     initListOfTasks()
    })
    .catch(function(error) {
        if (error.name === 'AbortError') {
      console.error('Fetch aborted')
     } else {
      console.error('Another error', error)
    }
  });   
})

      
    </script>
  <!--<script src="js/adminLogin.js"></script>-->  
</body>

</html>